{"version":3,"file":"map-viewer.js","sourceRoot":"","sources":["src/map-viewer.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAC,UAAU,EAAE,IAAI,EAAC,MAAM,KAAK,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,kBAAkB,EAAC,kBAAkB,EAAC,MAAM,EAAE,MAAM,QAAQ,CAAC;AACtE,OAAO,EAAC,MAAM,EAAC,MAAM,iBAAiB,CAAC;AACvC,OAAO,EAAC,qBAAqB,EAAC,MAAM,oBAAoB,CAAC;AAIzD,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,qBAAqB,CAAC,UAAU,CAAC;IAAhE;;QAII,kBAAa,GAAG,EAAE,CAAC;QAGnB,aAAQ,GAAG,EAAE,CAAC;QAWd,SAAI,GAAiD,IAAI,GAAG,EAAE,CAAC;IAgDnE,CAAC;IA5CY,MAAM;QACX,OAAO,IAAI,CAAA;;;KAGd,CAAC;IACF,CAAC;IAGQ,KAAK,CAAC,OAAO,CAAC,iBAAuC;QAC1D,IAAI,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAE,CAAC,EAAE;YAChD,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;gBAC5C,MAAO,IAAY,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;aACvD;SACR;IACL,CAAC;IAEQ,KAAK,CAAC,YAAY;;QACvB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAE1B,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC;SAC/C;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CACrB,IAAI,CAAC,UAAW,CAAC,cAAc,CAAC,iBAAiB,CAAE,EACnD;YACI,SAAS,EAAE,KAAK;YAChB,UAAU,EAAE,KAAK;YACjB,eAAe,EAAE,KAAK;YACtB,QAAQ,EAAE,KAAK;YACf,OAAO,EAAE,IAAI;YACb,eAAe,EAAE,IAAI;YACrB,kBAAkB,EAAE,KAAK;YACzB,QAAQ,EAAE,KAAK;YACf,sCAAsC,EAAE,KAAK;YAC7C,oBAAoB,EAAE,KAAK;YAC3B,OAAO,EAAE,IAAI;YACb,eAAe,EAAG,kBAAkB,EAAE;SACzC,CACJ,CAAC;QAEF,MAAA,IAAI,CAAC,OAAO,0CAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,kBAAkB,EAAE,CAAC,CAAC;IAC7D,CAAC;;AA/De,gBAAM,GAAG,MAAM,AAAT,CAAU;AAGhC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,iBAAiB,EAAE,CAAC;gDACtC;AAGnB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,CAAC;2CACrC;AAWd;IATC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE;YAC7B,aAAa,EAAE,CAAC,KAAS,EAAE,EAAE;gBACzB,IAAI;oBACA,OAAO,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;iBACrC;gBAAC,MAAM;oBACJ,OAAO,IAAI,GAAG,EAAE,CAAC;iBACpB;YACL,CAAC;SACJ,EAAC,CAAC;uCACwD;AAlBtD,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAkErB;SAlEY,SAAS","sourcesContent":["import {LitElement, html} from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\nimport { createWorldTerrain,createOsmBuildings,Viewer } from 'cesium';\r\nimport {styles} from \"./styles/styles\";\r\nimport {CesiumDataSourceMixin} from \"./mixins/dataMixin\";\r\n\r\n\r\n@customElement('map-viewer')\r\nexport class MapViewer extends CesiumDataSourceMixin(LitElement){\r\n    static override styles = styles;\r\n\r\n    @property({ type: String, attribute: 'cesium-base-url' })\r\n    cesiumBaseURL = '';\r\n\r\n    @property({ type: String, attribute: 'ion-token' })\r\n    ionToken = '';\r\n\r\n    @property({ type: Object, converter: {\r\n            fromAttribute: (value:any) => {\r\n                try {\r\n                    return new Map(JSON.parse(value));\r\n                } catch {\r\n                    return new Map();\r\n                }\r\n            },\r\n        }})\r\n    data: Map<string, { url: string; clamp: boolean }> = new Map();\r\n\r\n    private _viewer: Viewer | undefined;\r\n\r\n    override render() {\r\n        return html`\r\n      <div id=\"cesiumContainer\">\r\n      </div>\r\n    `;\r\n    }\r\n\r\n\r\n    override async updated(changedProperties: Map<string, unknown>) {\r\n        if (changedProperties.has('data') && this.data.size >0) {\r\n                for (const [key, value] of this.data.entries()) {\r\n                    await (this as any).addData(value.url, value.clamp);\r\n                }\r\n        }\r\n    }\r\n\r\n    override async firstUpdated() {\r\n        super.connectedCallback();\r\n\r\n        if (this.cesiumBaseURL) {\r\n            window.CESIUM_BASE_URL = this.cesiumBaseURL;\r\n        }\r\n\r\n        this._viewer = new Viewer(\r\n            this.shadowRoot!.getElementById('cesiumContainer')!,\r\n            {\r\n                animation: false,\r\n                homeButton: false,\r\n                baseLayerPicker: false,\r\n                geocoder: false,\r\n                infoBox: true,\r\n                sceneModePicker: true,\r\n                selectionIndicator: false,\r\n                timeline: false,\r\n                navigationInstructionsInitiallyVisible: false,\r\n                navigationHelpButton: false,\r\n                shadows: true,\r\n                terrainProvider : createWorldTerrain()\r\n            }\r\n        );\r\n\r\n        this._viewer?.scene.primitives.add(createOsmBuildings());\r\n    }\r\n\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'map-viewer': MapViewer;\r\n    }\r\n}\r\n"]}