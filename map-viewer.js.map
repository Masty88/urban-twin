{"version":3,"file":"map-viewer.js","sourceRoot":"","sources":["src/map-viewer.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAC,UAAU,EAAE,IAAI,EAAC,MAAM,KAAK,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAE5D,OAAO,EAAC,kBAAkB,EAAE,gBAAgB,EAAC,MAAM,wBAAwB,CAAC,CAAC,kCAAkC;AAC/G,OAAO,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAE9C,OAAO,EAAC,MAAM,EAAC,MAAM,iBAAiB,CAAC;AAMvC,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,UAAU;IAAzC;;QAII,kBAAa,GAAG,EAAE,CAAC;QAGnB,aAAQ,GAAG,EAAE,CAAC;QAWd,SAAI,GAAiD,IAAI,GAAG,EAAE,CAAC;IA8BnE,CAAC;IA1BY,MAAM;QACX,OAAO,IAAI,CAAA;;;KAGd,CAAC;IACF,CAAC;IAGQ,KAAK,CAAC,OAAO,CAAC,iBAAuC;QAC1D,IAAI,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAE,CAAC,EAAE;YAChD,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;gBAC1C,MAAM,UAAU,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC,OAAO,EAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;gBACtE,MAAM,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAA;aACnD;SAER;IACL,CAAC;IAEQ,KAAK,CAAC,YAAY;QACvB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,kBAAkB,CAC7B,IAAI,CAAC,UAAW,CAAC,cAAc,CAAC,iBAAiB,CAAE,EACnD,IAAI,CAAC,aAAa,CACrB,CAAC;IACN,CAAC;;AA7Ce,gBAAM,GAAG,MAAM,AAAT,CAAU;AAGhC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,iBAAiB,EAAE,CAAC;gDACtC;AAGnB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,CAAC;2CACrC;AAWd;IATC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE;YAC7B,aAAa,EAAE,CAAC,KAAS,EAAE,EAAE;gBACzB,IAAI;oBACA,OAAO,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;iBACrC;gBAAC,MAAM;oBACJ,OAAO,IAAI,GAAG,EAAE,CAAC;iBACpB;YACL,CAAC;SACJ,EAAC,CAAC;uCACwD;AAlBtD,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAgDrB;SAhDY,SAAS","sourcesContent":["import {LitElement, html} from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\n\r\nimport {createCesiumViewer, zoomToDataSource} from \"./cesium/cesiumHelpers\"; // <-- aggiungi l'importazione qui\r\nimport { addData } from './cesium/dataLoader';\r\n\r\nimport {styles} from \"./styles/styles\";\r\nimport {Viewer} from \"cesium\";\r\n\r\n\r\n\r\n@customElement('map-viewer')\r\nexport class MapViewer extends LitElement{\r\n    static override styles = styles;\r\n\r\n    @property({ type: String, attribute: 'cesium-base-url' })\r\n    cesiumBaseURL = '';\r\n\r\n    @property({ type: String, attribute: 'ion-token' })\r\n    ionToken = '';\r\n\r\n    @property({ type: Object, converter: {\r\n            fromAttribute: (value:any) => {\r\n                try {\r\n                    return new Map(JSON.parse(value));\r\n                } catch {\r\n                    return new Map();\r\n                }\r\n            },\r\n        }})\r\n    data: Map<string, { url: string; clamp: boolean }> = new Map();\r\n\r\n    private _viewer: Viewer | undefined;\r\n\r\n    override render() {\r\n        return html`\r\n      <div id=\"cesiumContainer\">\r\n      </div>\r\n    `;\r\n    }\r\n\r\n\r\n    override async updated(changedProperties: Map<string, unknown>) {\r\n        if (changedProperties.has('data') && this.data.size >0) {\r\n                for (const [_, value] of this.data.entries()) {\r\n                    const dataSource = await addData(this._viewer,value.url, value.clamp);\r\n                    await zoomToDataSource(this._viewer, dataSource)\r\n                }\r\n\r\n        }\r\n    }\r\n\r\n    override async firstUpdated() {\r\n        super.connectedCallback();\r\n        this._viewer = createCesiumViewer(\r\n            this.shadowRoot!.getElementById(\"cesiumContainer\")!,\r\n            this.cesiumBaseURL\r\n        );\r\n    }\r\n\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'map-viewer': MapViewer;\r\n    }\r\n}\r\n"]}